<h1>Purchases List</h1>

<div class='container'>
  <table class='table table-striped table-responsive'>
    <caption>Uploaded purchases</caption>
    <thead>
      <tr>
        <th>Purchaser</th>
        <th>Item Description</th>
        <th>Item Price</th>
        <th>Item Count</th>
        <th>Merchant Name</th>
        <th>Merchant Address</th>
      </tr>
    </thead>
    <tbody>
      <% @purchases.each do |purchase| %>
        <tr>
          <td><%= purchase.purchaser.name %></td>
          <td><%= purchase.item.description %></td>
          <td><%= number_to_currency(purchase.item.price, unit: 'R$', separator: ',', delimiter: '') %></td>
          <td><%= purchase.count %></td>
          <td><%= purchase.item.merchant.name %></td>
          <td><%= purchase.item.merchant.address %></td>
        </tr>
      <% end %>
      <tr>
        <th>Total Profits:</th>
        <td><b><%= purchases_total(@purchases) %></b></td>
      </tr>
    </tbody>
  </table>
</div>
